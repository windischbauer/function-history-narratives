<mat-toolbar-row class="repo-toolbar">
  <h3 class="repo-title">
    Repositories
  </h3>
</mat-toolbar-row>

<table mat-table [dataSource]="dataSource" class="repo-table" matSort>
  <ng-container matColumnDef="path">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Path</th>
    <td mat-cell *matCellDef="let element">
      <span *ngIf="fullPath">{{element.path}}</span>
      <span *ngIf="!fullPath">{{element.path.slice(element.path.lastIndexOf('/') + 1)}}</span>
    </td>
  </ng-container>

  <ng-container matColumnDef="function_count">
    <th mat-header-cell *matHeaderCellDef mat-sort-header arrowPosition="before"> Function Count
    </th>
    <td mat-cell *matCellDef="let element"> {{element.function_count}} </td>
  </ng-container>

  <ng-container matColumnDef="commit_count">
    <th mat-header-cell *matHeaderCellDef mat-sort-header arrowPosition="before"> Commit Count
    </th>
    <td mat-cell *matCellDef="let element"> {{element.commit_count}} </td>
  </ng-container>

  <ng-container matColumnDef="last_commit_time">
    <th mat-header-cell *matHeaderCellDef mat-sort-header arrowPosition="before"> Last Commit At
    </th>
    <td mat-cell *matCellDef="let element"> {{element.last_commit_time | date: 'dd. MMM. yyyy'}} </td>
  </ng-container>

  <ng-container matColumnDef="last_commit_rev">
    <th mat-header-cell *matHeaderCellDef mat-sort-header arrowPosition="before"> Last Commit
      Revision
    </th>
    <td mat-cell *matCellDef="let element"> {{element.last_commit_rev.slice(0, 8)}} </td>
  </ng-container>

  <tr mat-header-row
      *matHeaderRowDef="['path', 'function_count', 'commit_count', 'last_commit_time', 'last_commit_rev']"></tr>
  <tr mat-row (click)="emitRepo(row)"
      *matRowDef="let row; columns: ['path', 'function_count', 'commit_count', 'last_commit_time', 'last_commit_rev'];"></tr>
</table>
